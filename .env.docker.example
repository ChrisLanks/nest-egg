# =============================================================================
# Nest Egg - Docker Environment Configuration
# =============================================================================
# Copy this file to .env.docker and update values for your environment
# For production: Replace ALL "CHANGE_ME" values before deploying!
#
# Quick setup:
#   1. cp .env.docker.example .env.docker
#   2. Generate keys: openssl rand -hex 32
#   3. Update all CHANGE_ME values below
#   4. docker-compose --env-file .env.docker up -d
# =============================================================================

# =============================================================================
# CRITICAL SECURITY SETTINGS - MUST CHANGE IN PRODUCTION
# =============================================================================

# Application Environment
# Options: development, staging, production
ENVIRONMENT=production

# Database Credentials
POSTGRES_DB=nestegg
POSTGRES_USER=nestegg
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD

# Security Keys (Generate with: openssl rand -hex 32)
SECRET_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_HEX_32
MASTER_ENCRYPTION_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_HEX_32

# Allowed Hosts (CRITICAL for production - specific domains only!)
# Example: app.nestegg.com,api.nestegg.com
# NEVER use "*" in production - the app will reject this value
ALLOWED_HOSTS=app.yourdomain.com,api.yourdomain.com

# =============================================================================
# API KEYS - Required for Core Functionality
# =============================================================================

# Plaid (Financial Data Aggregation)
# Sign up at: https://dashboard.plaid.com
PLAID_CLIENT_ID=your_plaid_client_id
PLAID_SECRET=your_plaid_secret
PLAID_ENV=sandbox  # Options: sandbox, development, production
PLAID_WEBHOOK_SECRET=your_plaid_webhook_secret
PLAID_ENABLED=true

# Teller (Alternative Financial Aggregation - 100 free accounts/month)
# Sign up at: https://teller.io
TELLER_APP_ID=your_teller_app_id
TELLER_API_KEY=your_teller_api_key
TELLER_ENV=sandbox  # Options: sandbox, production
TELLER_WEBHOOK_SECRET=your_teller_webhook_secret
TELLER_ENABLED=true

# =============================================================================
# OPTIONAL - Market Data (for investment prices)
# =============================================================================

# Default is Yahoo Finance (FREE, no API key needed)
MARKET_DATA_PROVIDER=yahoo_finance

# Optional: Alpha Vantage (500 calls/day free)
# Sign up at: https://www.alphavantage.co/support/#api-key
# ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key

# Optional: Finnhub (60 calls/min free)
# Sign up at: https://finnhub.io/register
# FINNHUB_API_KEY=your_finnhub_key

# =============================================================================
# OPTIONAL - Monitoring & Observability
# =============================================================================

# Sentry Error Tracking (Recommended for production)
# Sign up at: https://sentry.io
# SENTRY_DSN=your_sentry_dsn

# Logging Configuration
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # Options: text, json (json recommended for production)

# =============================================================================
# OPTIONAL - Application Settings
# =============================================================================

# Authentication Timeouts
ACCESS_TOKEN_EXPIRE_MINUTES=15  # Industry standard for security
REFRESH_TOKEN_EXPIRE_DAYS=30

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_ECHO=false  # Set to true for SQL query debugging (not recommended in production)

# CORS Origins (Update for production to specific domains)
# Example for production: https://app.nestegg.com,https://www.nestegg.com
CORS_ORIGINS=http://localhost:3000,http://localhost:80

# Frontend API URL (Backend API endpoint as seen by the frontend)
# For production: https://api.yourdomain.com
# For local development: http://localhost:8000
VITE_API_URL=http://localhost:8000

# Frontend Port (Default: 80)
FRONTEND_PORT=80

# =============================================================================
# OPTIONAL - Celery Flower (Task Monitoring UI)
# =============================================================================

# Flower Web UI Credentials (Access at http://localhost:5555)
FLOWER_USER=admin
FLOWER_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# =============================================================================
# DEBUG MODE (Set to false in production)
# =============================================================================

DEBUG=false

# =============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying to production, verify:
#
# ✅ All CHANGE_ME values replaced with secure values
# ✅ SECRET_KEY and MASTER_ENCRYPTION_KEY generated with: openssl rand -hex 32
# ✅ POSTGRES_PASSWORD is strong (16+ chars, mixed case, numbers, symbols)
# ✅ ALLOWED_HOSTS set to specific domains (NOT "*")
# ✅ CORS_ORIGINS set to specific domains (NOT "http://localhost:*")
# ✅ ENVIRONMENT=production
# ✅ DEBUG=false
# ✅ LOG_FORMAT=json
# ✅ Plaid/Teller API keys from production accounts
# ✅ VITE_API_URL points to production backend domain
# ✅ FLOWER_PASSWORD is secure
# ✅ (Optional) SENTRY_DSN configured for error tracking
# ✅ SSL/TLS certificates configured (use reverse proxy like nginx or Traefik)
#
# =============================================================================
